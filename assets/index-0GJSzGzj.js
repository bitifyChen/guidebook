import{k as y,u as D,n as I,q as S,c as d,a as t,b as n,d as c,g as f,w as p,e as x,F as h,r as m,h as U,x as $,y as M,z as T,A,B as N,o as i,t as g,C as L,D as j,E as q}from"./index-5a36mV7Q.js";import{b as v}from"./route-block-B_A1xBdJ.js";/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=y("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=y("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=y("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=y("SendIcon",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Y={class:"min-h-screen bg-slate-50 pb-20"},O={class:"bg-white/80 backdrop-blur-md sticky top-0 z-30 border-b border-slate-100 p-6"},R={class:"max-w-4xl mx-auto flex justify-between items-center"},H={class:"max-w-4xl mx-auto p-6 space-y-8"},J={class:"bg-white rounded-[32px] p-6 shadow-sm border border-slate-100 space-y-4"},P={class:"text-sm font-black text-slate-400 uppercase tracking-widest flex items-center gap-2"},Z={class:"space-y-3"},G={class:"bg-white rounded-[32px] p-6 shadow-sm border border-slate-100"},K={class:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2"},Q={class:"grid grid-cols-2 md:grid-cols-5 gap-3"},W={class:"text-[10px] font-black text-slate-400 mb-1"},X=["onUpdate:modelValue"],tt={class:"p-4"},et={class:"text-lg font-black text-slate-800 px-2 flex items-center gap-2"},st={class:"grid gap-3"},ot={class:"w-10 h-10 bg-slate-100 rounded-2xl flex items-center justify-center font-black text-slate-400 text-sm"},nt=["onClick"],at={class:"font-black text-slate-700 leading-tight"},lt={class:"text-[10px] font-bold text-slate-400"},rt={class:"flex gap-2 items-center"},dt={class:"flex flex-col items-center bg-slate-50 rounded-xl p-1 px-2 border border-slate-100"},it=["onUpdate:modelValue","onChange"],ct={class:"flex flex-col items-center bg-orange-50 rounded-xl p-1 px-2 border border-orange-100"},ut=["onUpdate:modelValue","onChange"],pt=["onClick"],xt={__name:"index",setup(gt){const b=U(),u=D(),w=I(),l=$({title:"測試推播",body:"這是一條手動觸發的測試訊息！"}),C=async()=>{if(!(!l.title||!l.body))try{await M(T(A,"notification_requests"),{...l,createdAt:N(),status:"pending"}),alert("已送出推播請求！請確保 Cloud Function 已部署以發送訊息。")}catch(a){alert("送出失敗："+a.message)}};S(()=>u.init());const V=a=>u.itinerary.filter(e=>e.day===a).sort((e,s)=>e.order-s.order),k=async a=>{try{await q(a.id,{duration:a.duration,delay:a.delay}),console.log(`✅ 已更新 ${a.location} 的時間設定`)}catch(e){alert("更新失敗："+e.message)}},z=async()=>{try{await j("dayConfigs",{list:u.config}),console.log("✅ 每日起始時間已同步")}catch{alert("Config 更新失敗")}};return(a,e)=>(i(),d("div",Y,[t("header",O,[t("div",R,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-xl font-black text-slate-800"},"Jeju Admin"),t("p",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"}," Itinerary Management ")],-1)),t("button",{onClick:e[0]||(e[0]=s=>{n(w).logout(),n(b).push("/admin/login")}),class:"p-2 text-slate-300 hover:text-red-400"},[c(n(F),{size:20})])])]),t("main",H,[t("section",J,[t("h2",P,[c(n(_),{size:16}),e[5]||(e[5]=f(" Push Notification Test ",-1))]),t("div",Z,[p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.title=s),placeholder:"推播標題",class:"w-full bg-slate-50 p-3 rounded-2xl font-bold text-slate-700 outline-none border-2 border-transparent focus:border-orange-200 transition-all"},null,512),[[x,l.title]]),p(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.body=s),placeholder:"推播內容",rows:"2",class:"w-full bg-slate-50 p-3 rounded-2xl font-medium text-slate-600 outline-none border-2 border-transparent focus:border-orange-200 transition-all"},null,512),[[x,l.body]]),t("button",{onClick:C,class:"w-full py-3 bg-slate-800 text-white rounded-2xl font-black shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2"},[c(n(_),{size:16}),e[6]||(e[6]=f(" 送出測試推播 ",-1))])])]),t("section",G,[t("h2",K,[c(n(E),{size:16}),e[7]||(e[7]=f(" Start Time Config ",-1))]),t("div",Q,[(i(!0),d(h,null,m(n(u).config,s=>(i(),d("div",{key:s.day,class:"p-3 bg-slate-50 rounded-2xl border border-slate-100"},[t("div",W," DAY "+g(s.day),1),p(t("input",{"onUpdate:modelValue":o=>s.start=o,type:"time",onChange:z,class:"bg-transparent font-mono font-black text-slate-700 w-full outline-none"},null,40,X),[[x,s.start]])]))),128))])]),t("div",tt,[t("button",{onClick:e[3]||(e[3]=s=>n(b).push("/admin/item/add")),class:"w-full py-3 bg-orange-500 text-white rounded-2xl font-black shadow-lg shadow-orange-200 active:scale-95 transition-all"}," 添加行程 ")]),(i(!0),d(h,null,m(n(u).totalDays,s=>(i(),d("div",{key:s,class:"space-y-4"},[t("h3",et,[c(n(B),{size:18,class:"text-orange-500"}),f(" Day "+g(s),1)]),t("div",st,[(i(!0),d(h,null,m(V(s),o=>(i(),d("div",{key:o.id,class:"bg-white p-4 rounded-3xl border border-slate-100 flex items-center gap-4 hover:shadow-md transition-shadow cursor-pointer"},[t("div",ot,g(o.order),1),t("div",{class:"flex-1",onClick:r=>n(b).push(`/admin/item/${o.id}`)},[t("div",at,g(o.location),1),t("div",lt,g(o.category),1)],8,nt),t("div",rt,[t("div",dt,[e[8]||(e[8]=t("span",{class:"text-[8px] font-black text-slate-400"},"STAY",-1)),p(t("input",{"onUpdate:modelValue":r=>o.duration=r,type:"number",onChange:r=>k(o),class:"w-10 bg-transparent text-center font-mono font-black text-slate-600 outline-none"},null,40,it),[[x,o.duration,void 0,{number:!0}]])]),t("div",ct,[e[9]||(e[9]=t("span",{class:"text-[8px] font-black text-orange-400"},"DELAY",-1)),p(t("input",{"onUpdate:modelValue":r=>o.delay=r,type:"number",onChange:r=>k(o),class:"w-10 bg-transparent text-center font-mono font-black text-orange-600 outline-none"},null,40,ut),[[x,o.delay,void 0,{number:!0}]])]),t("button",{onClick:r=>n(b).push(`/admin/item/${o.id}`),class:"p-2 text-slate-300 hover:text-orange-500 transition-colors"},[c(n(L),{size:20})],8,pt)])]))),128))])]))),128))])]))}};typeof v=="function"&&v(xt);export{xt as default};
