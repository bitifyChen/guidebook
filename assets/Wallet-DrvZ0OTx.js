import{k as $,_ as z,l as M,o as r,c as u,a as e,t as c,g as x,A as N,J as O,d as o,b as d,K as a,f as E,F as I,r as V,i as T,L as q,M as D,s as k,X as H,N as R,O as Z,w as A,P as G,Q as J,T as K,U as Q,V as X,W as Y,Y as tt,Z as et,$ as st}from"./index-5qk_xDfl.js";import{P as lt}from"./plus-BdNs5WXE.js";import{U as ot}from"./users-hZKXwmcg.js";/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=$("ReceiptTextIcon",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]);/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=$("WalletMinimalIcon",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]),nt={class:"flex items-center gap-4"},it={class:"w-12 h-12 rounded-2xl overflow-hidden bg-orange-50 flex flex-col items-center justify-center font-black text-orange-500 text-xs border border-orange-100"},dt=["src"],rt={key:1,class:"scale-125"},ct={class:"font-black text-slate-800 text-base leading-tight"},pt={class:"text-[10px] font-bold text-slate-400 mt-1 flex items-center gap-1"},ut={class:"flex items-center gap-4"},mt={class:"text-right"},ft={class:"font-black text-slate-800 text-lg"},xt={__name:"PayCard",props:{item:{type:Object,default:()=>({})}},emits:["edit"],setup(_,{emit:p}){const h=M(),m=_,i=N(()=>{var b;return h.getParticipant((b=m==null?void 0:m.item)==null?void 0:b.payerId)}),s=p,w=()=>s("edit",m.item);return(b,v)=>{var y,n,t,f;return r(),u("div",{onClick:w,class:"bg-white p-5 rounded-[24px] border border-slate-100 flex justify-between items-center shadow-sm hover:shadow-md transition-shadow"},[e("div",nt,[e("div",it,[(y=i.value)!=null&&y.avatar?(r(),u("img",{key:0,src:i.value.avatar,class:"w-full h-full object-cover"},null,8,dt)):(r(),u("span",rt,c(((t=(n=i.value)==null?void 0:n.name)==null?void 0:t[0])||"?"),1))]),e("div",null,[e("h4",ct,c(_.item.description),1),e("p",pt,[x(c(_.item.date)+" ",1),v[0]||(v[0]=e("span",{class:"opacity-30"},"•",-1)),x(" 由 "+c((f=i.value)==null?void 0:f.name)+" 付款 ",1)])])]),e("div",ut,[e("div",mt,[e("span",ft,"₩"+c(_.item.amount.toLocaleString()),1)])])])}}},_t=z(xt,[["__scopeId","data-v-f0fcbfdb"]]),bt={class:"space-y-8"},gt={class:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group"},ht={class:"relative z-10"},vt={class:"flex items-center gap-2 mb-2 opacity-60"},yt={class:"flex items-baseline gap-2"},kt={class:"text-4xl font-black tracking-tight"},wt={class:"space-y-4"},It={class:"flex justify-between items-end mb-4"},Vt={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest"},Wt={key:0,class:"flex flex-col items-center py-20 text-slate-300"},Et={class:"p-4"},Ct={class:"flex justify-between items-center mb-8"},$t={class:"text-2xl font-black text-slate-800"},zt={class:"grid grid-cols-2 gap-4"},Mt={class:"h-12 bg-slate-50 rounded-2xl flex items-center px-4 gap-2 text-slate-500"},jt={class:"text-sm font-bold"},St={class:"mt-8 flex gap-4"},Ut={__name:"Wallet",setup(_){const p=O(),h=M(),m={mounted:n=>{setTimeout(()=>{(n.querySelector("input")||n).focus()},400)}},i=T(!1),s=Y({amount:"",description:"",payerId:"",splitWithIds:[]}),w=n=>{Object.assign(s,n),i.value=!0},b=()=>{if(!s.amount||!s.description||!s.payerId)return alert("請填寫完整的開支資訊！");s.id?et(s.id,{amount:parseFloat(s.amount),description:s.description,payerId:s.payerId,splitWithIds:[...s.splitWithIds]}).then(n=>{console.log("更新成功",n)}).finally(()=>{p.init()}):st({amount:parseFloat(s.amount),description:s.description,payerId:s.payerId,splitWithIds:[...s.splitWithIds]}).then(n=>{console.log("新增成功",n)}).finally(()=>{p.init()}),i.value=!1},v=()=>{s.id&&confirm("確定要刪除這筆開支嗎？")&&(tt(s.id).then(n=>{console.log("刪除成功",n)}).finally(()=>{p.init()}),i.value=!1)},y=()=>{Object.assign(s,{id:null,amount:"",description:"",payerId:"",splitWithIds:[]})};return(n,t)=>{const f=q,j=_t,W=G,g=Z,S=K,U=J,F=X,P=Q,B=R,L=D;return r(),u("div",bt,[e("div",gt,[e("div",ht,[e("div",vt,[o(d(at),{size:14}),t[7]||(t[7]=e("p",{class:"text-[10px] font-black uppercase tracking-[0.2em]"}," 旅行總支出 ",-1))]),e("div",yt,[t[8]||(t[8]=e("span",{class:"text-xl font-bold text-orange-400"},"₩",-1)),e("h2",kt,c(d(p).totalSpent.toLocaleString()),1)]),o(f,{class:"w-full !rounded-[20px] !h-14 mt-8 !text-lg !font-black !bg-orange-500 !border-none !text-white shadow-xl shadow-orange-900/20 active:scale-95 transition-transform",onClick:t[0]||(t[0]=l=>i.value=!0)},{default:a(()=>[o(d(lt),{size:20,class:"mr-2 stroke-[3px]"}),t[9]||(t[9]=x(" 新增行程開支 ",-1))]),_:1})]),o(d(C),{size:120,class:"absolute -bottom-6 -right-6 opacity-10 rotate-12 group-hover:scale-110 transition-transform duration-700"})]),e("div",wt,[e("div",It,[t[10]||(t[10]=e("h3",{class:"font-black text-slate-800 text-xl tracking-tight"}," 費用明細 ",-1)),e("span",Vt,c(d(p).expenses.length)+" 筆記錄",1)]),d(p).expenses.length===0?(r(),u("div",Wt,[o(d(C),{size:48,class:"opacity-20 mb-2"}),t[11]||(t[11]=e("p",{class:"italic font-medium"},"尚未有任何開銷紀錄",-1))])):E("",!0),(r(!0),u(I,null,V(d(p).expenses,l=>(r(),k(j,{key:l.id,item:l,onEdit:w},null,8,["item"]))),128))]),o(L,{modelValue:i.value,"onUpdate:modelValue":t[6]||(t[6]=l=>i.value=l),direction:"btt",size:"auto","with-header":!1,"append-to-body":!0,class:"custom-drawer",onClose:y},{default:a(()=>[e("div",Et,[e("div",Ct,[e("h2",$t,c(s.id?"編輯":"新增")+"這筆開支 ",1),e("button",{onClick:t[1]||(t[1]=l=>i.value=!1),class:"p-2 bg-slate-100 rounded-full text-slate-400"},[o(d(H),{size:20})])]),o(B,{"label-position":"top",class:"custom-form"},{default:a(()=>[o(g,null,{label:a(()=>[...t[12]||(t[12]=[e("span",{class:"label-custom"},"支出金額 (₩)",-1)])]),default:a(()=>[A(o(W,{modelValue:s.amount,"onUpdate:modelValue":t[2]||(t[2]=l=>s.amount=l),inputmode:"decimal",type:"number",placeholder:"0",class:"custom-input"},null,8,["modelValue"]),[[m]])]),_:1}),o(g,null,{label:a(()=>[...t[13]||(t[13]=[e("span",{class:"label-custom"},"支出內容",-1)])]),default:a(()=>[o(W,{modelValue:s.description,"onUpdate:modelValue":t[3]||(t[3]=l=>s.description=l),placeholder:"例如：漢拿山炒飯",class:"custom-input",enterkeyhint:"done"},null,8,["modelValue"])]),_:1}),e("div",zt,[o(g,null,{label:a(()=>[...t[14]||(t[14]=[e("span",{class:"label-custom tracking-tighter"},"誰先墊錢？",-1)])]),default:a(()=>[o(U,{modelValue:s.payerId,"onUpdate:modelValue":t[4]||(t[4]=l=>s.payerId=l),class:"w-full custom-select",placeholder:"選擇付款人"},{default:a(()=>[(r(!0),u(I,null,V(d(h).participants,l=>(r(),k(S,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(g,null,{label:a(()=>[...t[15]||(t[15]=[e("span",{class:"label-custom tracking-tighter"},"參與人數",-1)])]),default:a(()=>[e("div",Mt,[o(d(ot),{size:16}),e("span",jt,c(s.splitWithIds.length)+" 人",1)])]),_:1})]),o(g,null,{label:a(()=>[...t[16]||(t[16]=[e("span",{class:"label-custom"},"要跟誰分這筆錢？",-1)])]),default:a(()=>[o(P,{modelValue:s.splitWithIds,"onUpdate:modelValue":t[5]||(t[5]=l=>s.splitWithIds=l),class:"flex flex-wrap gap-2"},{default:a(()=>[(r(!0),u(I,null,V(d(h).participants,l=>(r(),k(F,{key:l.id,label:l.id,class:"custom-checkbox",border:""},{default:a(()=>[x(c(l.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e("div",St,[s.id?(r(),k(f,{key:0,type:"primary",onClick:v,class:"w-full !h-16 !rounded-[24px] !bg-red-500 !border-none !text-xl !font-black shadow-xl shadow-red-100 !ml-0"},{default:a(()=>[...t[17]||(t[17]=[x("刪除這筆開支",-1)])]),_:1})):E("",!0),o(f,{type:"primary",onClick:b,class:"w-full !h-16 !rounded-[24px] !bg-orange-500 !border-none !text-xl !font-black shadow-xl shadow-orange-100"},{default:a(()=>[x(c(s.id?"更新":"儲存")+"這筆開支",1)]),_:1})])])]),_:1},8,["modelValue"])])}}},Lt=z(Ut,[["__scopeId","data-v-f7125952"]]);export{Lt as default};
