import{k as V,_ as F,z as M,o as c,c as u,a as e,t as r,g as m,A as H,B as L,d as a,b as i,D as o,f as W,F as w,r as I,i as N,E as O,H as q,J as h,X as D,K as T,L as R,M as A,N as G,O as J,P as K,Q,R as X,S as Z,T as Y,U as tt}from"./index-CxTK9k8l.js";/* empty css                 */import{P as et}from"./plus-CW1nJokL.js";/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=V("ReceiptTextIcon",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]);/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=V("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-vue-next v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=V("WalletMinimalIcon",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]),at={class:"flex items-center gap-4"},ot={class:"w-12 h-12 rounded-2xl bg-orange-50 flex flex-col items-center justify-center font-black text-orange-500 text-xs border border-orange-100"},nt={class:"scale-125"},it={class:"font-black text-slate-800 text-base leading-tight"},dt={class:"text-[10px] font-bold text-slate-400 mt-1 flex items-center gap-1"},rt={class:"flex items-center gap-4"},ct={class:"text-right"},pt={class:"font-black text-slate-800 text-lg"},ut={__name:"PayCard",props:{item:{type:Object,default:()=>({})}},emits:["edit"],setup(x,{emit:p}){const _=M(),n=x,s=H(()=>{var f;return _.getParticipant((f=n==null?void 0:n.item)==null?void 0:f.payerId)}),y=p,k=()=>y("edit",n.item);return(f,g)=>{var d,t;return c(),u("div",{onClick:k,class:"bg-white p-5 rounded-[24px] border border-slate-100 flex justify-between items-center shadow-sm hover:shadow-md transition-shadow"},[e("div",at,[e("div",ot,[e("span",nt,r((d=s.value)==null?void 0:d.name[0]),1)]),e("div",null,[e("h4",it,r(x.item.description),1),e("p",dt,[m(r(x.item.date)+" ",1),g[0]||(g[0]=e("span",{class:"opacity-30"},"•",-1)),m(" 由 "+r((t=s.value)==null?void 0:t.name)+" 付款 ",1)])])]),e("div",rt,[e("div",ct,[e("span",pt,"₩"+r(x.item.amount.toLocaleString()),1)])])])}}},mt=F(ut,[["__scopeId","data-v-0b4ac7c1"]]),xt={class:"space-y-8"},ft={class:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group"},bt={class:"relative z-10"},_t={class:"flex items-center gap-2 mb-2 opacity-60"},gt={class:"flex items-baseline gap-2"},ht={class:"text-4xl font-black tracking-tight"},yt={class:"space-y-4"},kt={class:"flex justify-between items-end mb-4"},vt={class:"text-[10px] font-black text-slate-400 uppercase tracking-widest"},wt={key:0,class:"flex flex-col items-center py-20 text-slate-300"},It={class:"p-4"},Vt={class:"flex justify-between items-center mb-8"},Et={class:"text-2xl font-black text-slate-800"},Wt={class:"grid grid-cols-2 gap-4"},Ct={class:"h-12 bg-slate-50 rounded-2xl flex items-center px-4 gap-2 text-slate-500"},Mt={class:"text-sm font-bold"},zt={class:"mt-8 flex gap-4"},Ut={__name:"Wallet",setup(x){const p=L(),_=M(),n=N(!1),s=X({amount:"",description:"",payerId:"",splitWithIds:[]}),y=d=>{Object.assign(s,d),n.value=!0},k=()=>{if(!s.amount||!s.description||!s.payerId)return alert("請填寫完整的開支資訊！");s.id?Y(s.id,{amount:parseFloat(s.amount),description:s.description,payerId:s.payerId,splitWithIds:[...s.splitWithIds]}).then(d=>{console.log("更新成功",d)}).finally(()=>{p.init()}):tt({amount:parseFloat(s.amount),description:s.description,payerId:s.payerId,splitWithIds:[...s.splitWithIds]}).then(d=>{console.log("新增成功",d)}).finally(()=>{p.init()}),n.value=!1},f=()=>{s.id&&confirm("確定要刪除這筆開支嗎？")&&(Z(s.id).then(d=>{console.log("刪除成功",d)}).finally(()=>{p.init()}),n.value=!1)},g=()=>{Object.assign(s,{id:null,amount:"",description:"",payerId:"",splitWithIds:[]})};return(d,t)=>{const v=O,z=mt,E=A,b=R,$=J,S=G,j=Q,U=K,P=T,B=q;return c(),u("div",xt,[e("div",ft,[e("div",bt,[e("div",_t,[a(i(lt),{size:14}),t[7]||(t[7]=e("p",{class:"text-[10px] font-black uppercase tracking-[0.2em]"}," 旅行總支出 ",-1))]),e("div",gt,[t[8]||(t[8]=e("span",{class:"text-xl font-bold text-orange-400"},"₩",-1)),e("h2",ht,r(i(p).totalSpent.toLocaleString()),1)]),a(v,{class:"w-full !rounded-[20px] !h-14 mt-8 !text-lg !font-black !bg-orange-500 !border-none !text-white shadow-xl shadow-orange-900/20 active:scale-95 transition-transform",onClick:t[0]||(t[0]=l=>n.value=!0)},{default:o(()=>[a(i(et),{size:20,class:"mr-2 stroke-[3px]"}),t[9]||(t[9]=m(" 新增行程開支 ",-1))]),_:1})]),a(i(C),{size:120,class:"absolute -bottom-6 -right-6 opacity-10 rotate-12 group-hover:scale-110 transition-transform duration-700"})]),e("div",yt,[e("div",kt,[t[10]||(t[10]=e("h3",{class:"font-black text-slate-800 text-xl tracking-tight"}," 費用明細 ",-1)),e("span",vt,r(i(p).expenses.length)+" 筆記錄",1)]),i(p).expenses.length===0?(c(),u("div",wt,[a(i(C),{size:48,class:"opacity-20 mb-2"}),t[11]||(t[11]=e("p",{class:"italic font-medium"},"尚未有任何開銷紀錄",-1))])):W("",!0),(c(!0),u(w,null,I(i(p).expenses,l=>(c(),h(z,{key:l.id,item:l,onEdit:y},null,8,["item"]))),128))]),a(B,{modelValue:n.value,"onUpdate:modelValue":t[6]||(t[6]=l=>n.value=l),direction:"btt",size:"auto","with-header":!1,"append-to-body":!0,class:"custom-drawer",onClose:g},{default:o(()=>[e("div",It,[e("div",Vt,[e("h2",Et,r(s.id?"編輯":"新增")+"這筆開支 ",1),e("button",{onClick:t[1]||(t[1]=l=>n.value=!1),class:"p-2 bg-slate-100 rounded-full text-slate-400"},[a(i(D),{size:20})])]),a(P,{"label-position":"top",class:"custom-form"},{default:o(()=>[a(b,null,{label:o(()=>[...t[12]||(t[12]=[e("span",{class:"label-custom"},"支出金額 (₩)",-1)])]),default:o(()=>[a(E,{modelValue:s.amount,"onUpdate:modelValue":t[2]||(t[2]=l=>s.amount=l),type:"number",placeholder:"0",class:"custom-input"},null,8,["modelValue"])]),_:1}),a(b,null,{label:o(()=>[...t[13]||(t[13]=[e("span",{class:"label-custom"},"支出內容",-1)])]),default:o(()=>[a(E,{modelValue:s.description,"onUpdate:modelValue":t[3]||(t[3]=l=>s.description=l),placeholder:"例如：漢拿山炒飯",class:"custom-input"},null,8,["modelValue"])]),_:1}),e("div",Wt,[a(b,null,{label:o(()=>[...t[14]||(t[14]=[e("span",{class:"label-custom tracking-tighter"},"誰先墊錢？",-1)])]),default:o(()=>[a(S,{modelValue:s.payerId,"onUpdate:modelValue":t[4]||(t[4]=l=>s.payerId=l),class:"w-full custom-select",placeholder:"選擇付款人"},{default:o(()=>[(c(!0),u(w,null,I(i(_).participants,l=>(c(),h($,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(b,null,{label:o(()=>[...t[15]||(t[15]=[e("span",{class:"label-custom tracking-tighter"},"參與人數",-1)])]),default:o(()=>[e("div",Ct,[a(i(st),{size:16}),e("span",Mt,r(s.splitWithIds.length)+" 人",1)])]),_:1})]),a(b,null,{label:o(()=>[...t[16]||(t[16]=[e("span",{class:"label-custom"},"要跟誰分這筆錢？",-1)])]),default:o(()=>[a(U,{modelValue:s.splitWithIds,"onUpdate:modelValue":t[5]||(t[5]=l=>s.splitWithIds=l),class:"flex flex-wrap gap-2"},{default:o(()=>[(c(!0),u(w,null,I(i(_).participants,l=>(c(),h(j,{key:l.id,label:l.id,class:"custom-checkbox",border:""},{default:o(()=>[m(r(l.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e("div",zt,[s.id?(c(),h(v,{key:0,type:"primary",onClick:f,class:"w-full !h-16 !rounded-[24px] !bg-red-500 !border-none !text-xl !font-black shadow-xl shadow-red-100 !ml-0"},{default:o(()=>[...t[17]||(t[17]=[m("刪除這筆開支",-1)])]),_:1})):W("",!0),a(v,{type:"primary",onClick:k,class:"w-full !h-16 !rounded-[24px] !bg-orange-500 !border-none !text-xl !font-black shadow-xl shadow-orange-100"},{default:o(()=>[m(r(s.id?"更新":"儲存")+"這筆開支",1)]),_:1})])])]),_:1},8,["modelValue"])])}}};export{Ut as default};
